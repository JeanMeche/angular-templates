<div class="nav">
  <button
    type="button"
    class="btn prev"
    (click)="previewPrev()"
    [disabled]="idx() === 0"
    title="Previous image"
  >
    <ngx-icon name="ChevronRight" size="xxlg"></ngx-icon>
  </button>
  <button
    type="button"
    class="btn next"
    (click)="previewNext()"
    [disabled]="idx() === imagesTotal() - 1"
    title="Next image"
  >
    <ngx-icon name="ChevronRight" size="xxlg"></ngx-icon>
  </button>
</div>

<div
  class="img-wrapper"
  [style.animation-duration]="ANIM_DURATION + 'ms'"
  [class.slide-left]="animation() === 'slide-left'"
  [class.slide-right]="animation() === 'slide-right'"
>
  @if (showImage() && image().src) {
    <img
      [ngSrc]="image().src"
      [width]="image().width"
      [height]="image().height"
      [style.width]="aspectRatio() > 1 ? IMG_MAX_WIDTH : 'initial'"
      [style.height]="aspectRatio() <= 1 ? IMG_MAX_HEIGHT : 'initial'"
      [style.aspect-ratio]="image().width + '/' + image().height"
      [alt]="(image().metadata || {})['name'] || 'Image'"
    />
  }
  @if (image().metadata; as metadata) {
    <div class="metadata">
      @for (item of metadata | keyvalue; track item.key) {
        <div class="item">
          <span class="prop">{{ item.key }}</span>
          <span class="value">{{ item.value }}</span>
        </div>
      }
    </div>
  }
  <p>{{ idx() }}</p>
</div>
<div class="controls">
  <button
    class="btn download"
    type="button"
    title="Download image"
    (click)="download()"
  >
    <ngx-icon name="Download"></ngx-icon>
  </button>
  <button
    class="btn close"
    type="button"
    title="Close image preview"
    (click)="ctrl.close()"
  >
    <ngx-icon name="Close"></ngx-icon>
  </button>
</div>
