<svg #svgElement xmlns="http://www.w3.org/2000/svg">
  <g
    dbWidgetScale
    [x]="BARS_LEFT_PADDING - SCALE_SIDE_PADDING"
    [y]="BARS_TOP_PADDING"
    [width]="
      contSize().width -
      BARS_RIGHT_PADDING -
      BARS_LEFT_PADDING +
      SCALE_SIDE_PADDING * 2
    "
    [height]="maxBarHeight()"
    [max]="nearestMax()"
  ></g>
  <g
    class="bars"
    [attr.transform]="
      'translate(' + BARS_LEFT_PADDING + ', ' + BARS_TOP_PADDING + ')'
    "
  >
    @for (item of normalizedData(); track $index; let i = $index) {
      <rect
        [attr.width]="barWidth()"
        [attr.x]="(barWidth() + BAR_SPACING) * i"
        [attr.y]="this.maxBarHeight() - item.value"
        [attr.height]="item.value"
        [attr.fill]="colorsArray()[i]"
        [dbWidgetTooltip]="data().get(i)!"
        rx="4"
        ry="4"
      />
      <text
        [attr.x]="(barWidth() + BAR_SPACING) * i + barWidth() / 2"
        [attr.y]="this.maxBarHeight() + LABELS_MARGIN_TOP"
        class="label"
      >
        {{ item.label | chartLabel }}
      </text>
    }
  </g>
</svg>
